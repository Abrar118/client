import{R as y,r as i}from"./react-ee2054f5.js";import{g as bt,_,a as Ye,b as ee,d as f,e as b,f as $,h as St,i as yt,j as Ct,k as Et,l as wt,m as Ve,n as Rt,o as Nt,p as rt,q as Ht,r as xt,s as Ke,t as Bt}from"./@babel-2cccee12.js";import{c as me}from"./classnames-a743e635.js";import"./core-js-7bbb6560.js";import{c as _t}from"./@emotion-0f7eaed6.js";import{r as Ot}from"./math-random-fc091eca.js";function Pt(t,e){try{var r=global,n=r.document;if(typeof n<"u"&&n.createElement&&n.head&&n.head.appendChild){var a=n.querySelector('html meta[name="'.concat(encodeURI(t),'"]'))||n.createElement("meta");a.setAttribute("name",t),a.setAttribute("content",e),n.head.appendChild(a)}}catch{}}function kt(){Pt("react-scroll-to-bottom:version","4.2.0")}var ot={exports:{}},It="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Lt=It,Mt=Lt;function nt(){}function at(){}at.resetWarningCache=nt;var $t=function(){function t(n,a,l,s,o,h){if(h!==Mt){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}t.isRequired=t;function e(){return t}var r={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:at,resetWarningCache:nt};return r.PropTypes=r,r};ot.exports=$t();var Ft=ot.exports;const m=bt(Ft);var de=y.createContext({scrollTo:function(){return 0},scrollToBottom:function(){return 0},scrollToEnd:function(){return 0},scrollToStart:function(){return 0},scrollToTop:function(){return 0}});de.displayName="ScrollToBottomFunctionContext";function Dt(){return i.useContext(de)}function jt(){var t=Dt(),e=t.scrollToEnd;return e}var pe=y.createContext({atBottom:!0,atEnd:!0,atStart:!1,atTop:!0,mode:"bottom"});pe.displayName="ScrollToBottomState1Context";var he=y.createContext({animating:!1,animatingToEnd:!1,sticky:!0});he.displayName="ScrollToBottomState2Context";var ge=y.createContext({animating:!1,animatingToEnd:!1,atBottom:!0,atEnd:!0,atStart:!1,atTop:!0,mode:"bottom",sticky:!0});ge.displayName="ScrollToBottomStateContext";var ze=[ge,pe,he];function At(t){return i.useContext(ze[t]||ze[0])}function qt(){var t=At(2),e=t.sticky;return[e]}var te=y.createContext({offsetHeight:0,scrollHeight:0,setTarget:function(){return 0},styleToClassName:function(){return""}});te.displayName="ScrollToBottomInternalContext";function Wt(){return i.useContext(te)}function Te(){var t=Wt(),e=t.styleToClassName;return e}var Ut={backgroundColor:"rgba(0, 0, 0, .2)",borderRadius:10,borderWidth:0,bottom:5,cursor:"pointer",height:20,outline:0,position:"absolute",right:20,width:20,"&:hover":{backgroundColor:"rgba(0, 0, 0, .4)"},"&:active":{backgroundColor:"rgba(0, 0, 0, .6)"}},be=function(e){var r=e.children,n=e.className,a=qt(),l=_(a,1),s=l[0],o=Te()(Ut),h=jt();return!s&&y.createElement("button",{className:me(o,(n||"")+""),onClick:h,type:"button"},r)};be.defaultProps={children:void 0,className:""};be.propTypes={children:m.any,className:m.string};function Yt(){return Ot().toString(26).substr(2,5).replace(/[0-9]/g,function(t){return String.fromCharCode(t.charCodeAt(0)+65)})}function p(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"white",r="background-color: ".concat(t,"; border-radius: 4px; padding: 2px 4px;");return e&&(r+=" color: ".concat(e,";")),[r,""]}function Ge(t,e){for(var r,n,a=arguments.length,l=new Array(a>2?a-2:0),s=2;s<a;s++)l[s-2]=arguments[s];return b(r=[b(n="%c".concat(t,"%c ")).call(n,e)]).call(r,f(p("green","white")),l)}function Vt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.force,n=r===void 0?!1:r;return n?function(){for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];if(l.length){var o=l,h=_(o,1),S=h[0];typeof S=="function"&&(l=S());var u=Ye(l[0])?l:[l],C=u.length===1;ee(u).call(u,function(w,q){if(C){var N,E;(N=console).log.apply(N,f(Ge.apply(void 0,b(E=[t]).call(E,f(w)))))}else if(q){var F;(F=console).log.apply(F,f(Ye(w)?w:[w]))}else{var O,G;(O=console).groupCollapsed.apply(O,f(Ge.apply(void 0,b(G=[t]).call(G,f(w)))))}}),C||console.groupEnd()}}:function(){return 0}}function Kt(t,e){if(!e)return t;var r=0,n=null;return function(){for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];var o=$();o-r>e?(t.apply(void 0,l),r=o):(clearTimeout(n),n=St(function(){t.apply(void 0,l),r=$()},Math.max(0,e-o+r)))}}var lt=function(e){var r=e.debounce,n=e.name,a=e.onEvent,l=e.target,s=i.useRef();s.current=a;var o=i.useMemo(function(){return Kt(function(S){var u=s.current;u&&u(S)},r)},[r,s]),h=i.useCallback(function(S){S.timeStampLow=$(),o(S)},[o]);return i.useLayoutEffect(function(){return l.addEventListener(n,h,{passive:!0}),h({target:l,type:n}),function(){return l.removeEventListener(n,h)}},[n,h,l]),!1};lt.defaultProps={debounce:200};function zt(t,e){var r=yt(e-t),n=Math.sqrt(Math.abs(e-t)),a=t+n*r;return r>0?Math.min(e,a):Math.max(e,a)}function Gt(t,e,r,n){for(var a=t,l=0;l<n;l++)a=r(a,e);return a}var ct=function(e){var r=e.name,n=e.onEnd,a=e.target,l=e.value,s=i.useRef(),o=i.useCallback(function(S,u,C,w){var q=arguments.length>4&&arguments[4]!==void 0?arguments[4]:$();(C==="100%"||typeof C=="number")&&(cancelAnimationFrame(s.current),s.current=requestAnimationFrame(function(){if(a){var N=C==="100%"?a.scrollHeight-a.offsetHeight:C,E=Gt(u,N,zt,($()-q)/5);Math.abs(N-E)<1.5&&(E=N),a[S]=E,N===E?n&&n(!0):o(S,u,C,w+1,q)}}))},[s,n,a]),h=i.useCallback(function(){cancelAnimationFrame(s.current),n&&n(!1)},[n]);return i.useLayoutEffect(function(){return o(r,a[r],l,1),a?(a.addEventListener("pointerdown",h,{passive:!0}),a.addEventListener("wheel",h,{passive:!0}),function(){a.removeEventListener("pointerdown",h),a.removeEventListener("wheel",h),cancelAnimationFrame(s.current)}):function(){return cancelAnimationFrame(s.current)}},[o,s,h,r,a,l]),!1};ct.propTypes={name:m.string.isRequired,onEnd:m.func,target:m.any.isRequired,value:m.oneOfType([m.number,m.oneOf(["100%"])]).isRequired};function ve(t){var e=i.useState(t),r=_(e,2),n=r[0],a=r[1],l=i.useRef(),s=i.useCallback(function(o){typeof o=="function"?s(function(h){return o=o(h),l.current=o,o}):(l.current=o,s(o))},[l]);return l.current=n,[n,a,l]}function Je(t,e){var r=xt(t);if(Ke){var n=Ke(t);e&&(n=Bt(n).call(n,function(a){return rt(t,a).enumerable})),r.push.apply(r,n)}return r}function Qe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};if(e%2){var n;ee(n=Je(Object(r),!0)).call(n,function(l){wt(t,l,r[l])})}else if(Ve)Rt(t,Ve(r));else{var a;ee(a=Je(Object(r))).call(a,function(l){Nt(t,l,rt(r,l))})}}return t}var Jt=function(){return 1/0},Xe=17,Qt="bottom",x="top",Ze=1,Xt=34,et={};function Zt(t,e){return t(),Ht(t,e)}function tt(t){var e=t.mode,r=t.target,n=r.offsetHeight,a=r.scrollHeight,l=r.scrollTop,s=a-l-n<Ze,o=l<Ze,h=e===x?o:s,S=e!==x?o:s;return{atBottom:s,atEnd:h,atStart:S,atTop:o}}function z(t,e){return t===(e===x?0:"100%")}var Se=function(e){var r=e.checkInterval,n=e.children,a=e.debounce,l=e.debug,s=e.initialScrollBehavior,o=e.mode,h=e.nonce,S=e.scroller,u=i.useMemo(function(){return Vt("<ScrollToBottom>",{force:l})},[l]);o=o===x?x:Qt;var C=i.useRef(0),w=i.useRef(s),q=ve(o===x?0:"100%"),N=_(q,3),E=N[0],F=N[1],O=N[2],G=ve(null),re=_(G,3),R=re[0],Ee=re[1],B=re[2],oe=i.useRef(0),ne=i.useRef(0),J=i.useRef(0),it=i.useState(!0),we=_(it,2),Re=we[0],Ne=we[1],ut=i.useState(!0),He=_(ut,2),xe=He[0],Be=He[1],ft=i.useState(!0),_e=_(ft,2),Oe=_e[0],Pe=_e[1],vt=i.useState(!1),ke=_(vt,2),Ie=ke[0],Le=ke[1],mt=ve(!0),ae=_(mt,3),le=ae[0],k=ae[1],I=ae[2],K=i.useRef([]),Me=i.useCallback(function(c){var d=B.current;return K.current.push(c),d&&c({scrollTop:d.scrollTop}),function(){var v=K.current,g=Ct(v).call(v,c);~g&&Et(v).call(v,g,1)}},[K,B]),ce=i.useCallback(function(){var c=O.current;u(function(){var d;return b(d=["%cSpineTo%c: %conEnd%c is fired."]).call(d,f(p("magenta")),f(p("orange")),[{animateTo:c}])}),C.current=$(),z(c,o)||k(!1),F(null)},[O,u,C,o,F,k]),L=i.useCallback(function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=d.behavior,g=B.current;if(typeof c!="number"&&c!=="100%")return console.warn('react-scroll-to-bottom: Arguments passed to scrollTo() must be either number or "100%".');u(function(){var T;return[b(T=["%cscrollTo%c: Will scroll to %c".concat(typeof c=="number"?c+"px":c.replace(/%/g,"%%"),"%c")]).call(T,f(p("lime","")),f(p("purple"))),{behavior:v,nextAnimateTo:c,target:g}]}),v==="auto"?(ce(),g&&(g.scrollTop=c==="100%"?g.scrollHeight-g.offsetHeight:c)):(v!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollTo". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),F(c)),z(c,o)&&(u(function(){var T;return[b(T=["%cscrollTo%c: Scrolling to end, will set sticky to %ctrue%c."]).call(T,f(p("lime","")),f(p("purple"))),[{mode:o,nextAnimateTo:c}]]}),k(!0))},[u,ce,o,F,k,B]),W=i.useCallback(function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.behavior;u(function(){var v;return b(v=["%cscrollToBottom%c: Called"]).call(v,f(p("yellow","")))}),d!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToBottom". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),L("100%",{behavior:d||"smooth"})},[u,L]),U=i.useCallback(function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.behavior;u(function(){var v;return b(v=["%cscrollToTop%c: Called"]).call(v,f(p("yellow","")))}),d!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToTop". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),L(0,{behavior:d||"smooth"})},[u,L]),$e=i.useCallback(function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.behavior;u(function(){var g;return b(g=["%cscrollToEnd%c: Called"]).call(g,f(p("yellow","")))}),d!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToEnd". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var v={behavior:d||"smooth"};o===x?U(v):W(v)},[u,o,W,U]),Fe=i.useCallback(function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.behavior;u(function(){var g;return b(g=["%cscrollToStart%c: Called"]).call(g,f(p("yellow","")))}),d!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToStart". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var v={behavior:d||"smooth"};o===x?W(v):U(v)},[u,o,W,U]),Q=i.useCallback(function(){var c=B.current;if(c){if(w.current==="auto"){u(function(){var j;return b(j=["%ctarget changed%c: Initial scroll"]).call(j,f(p("blue")))}),c.scrollTop=o===x?0:c.scrollHeight-c.offsetHeight,w.current=!1;return}var d=oe.current,v=c.offsetHeight,g=c.scrollHeight,T=c.scrollTop,P=o===x?0:Math.max(0,g-v-T),D=Math.max(0,d-T),X=S({maxValue:P,minValue:D,offsetHeight:v,scrollHeight:g,scrollTop:T}),M=Math.max(0,Math.min(P,X)),H;o===x||M!==P?H=T+M:H="100%",u(function(){var j,Y,V;return[b(j=[b(Y=b(V="%cscrollToSticky%c: Will animate from %c".concat(d,"px%c to %c")).call(V,typeof H=="number"?H+"px":H.replace(/%/g,"%%"),"%c (%c")).call(Y,(H==="100%"?P:H)+d,"px%c)")]).call(j,f(p("orange")),f(p("purple")),f(p("purple")),f(p("purple"))),{animateFrom:d,maxValue:P,minValue:D,nextAnimateTo:H,nextValue:M,offsetHeight:v,rawNextValue:X,scrollHeight:g,scrollTop:T}]}),L(H,{behavior:"smooth"})}},[oe,u,o,S,L,B]),dt=i.useCallback(function(c){var d,v=c.timeStampLow,g=O.current,T=B.current,P=g!==null;if(!(v<=C.current||!T)){var D=tt({mode:o,target:T}),X=D.atBottom,M=D.atEnd,H=D.atStart,j=D.atTop;Ne(X),Be(M),Le(H),Pe(j);var Y=T.offsetHeight,V=T.scrollHeight,je=ne.current,Ae=J.current,ue=Y!==je,fe=V!==Ae;if(ue&&(ne.current=Y),fe&&(J.current=V),!ue&&!fe){var Z=P&&z(g,o)||M;I.current!==Z&&(u(function(){var A,qe,We,Ue;return[b(A=["%conScroll%c: %csetSticky%c(%c".concat(Z,"%c)")]).call(A,f(p("red")),f(p("red")),f(p("purple"))),b(qe=[b(We=b(Ue="(animating = %c".concat(P,"%c && isEnd = %c")).call(Ue,z(g,o),"%c) || atEnd = %c")).call(We,M,"%c")]).call(qe,f(p("purple")),f(p("purple")),f(p("purple")),[{animating:P,animateTo:g,atEnd:M,mode:o,offsetHeight:T.offsetHeight,scrollHeight:T.scrollHeight,sticky:I.current,nextSticky:Z}])]}),k(Z))}else I.current&&(u(function(){var A;return[b(A=["%conScroll%c: Size changed while sticky, calling %cscrollToSticky()%c"]).call(A,f(p("red")),f(p("orange")),[{offsetHeightChanged:ue,scrollHeightChanged:fe}]),{nextOffsetHeight:Y,prevOffsetHeight:je,nextScrollHeight:V,prevScrollHeight:Ae}]}),Q());var Tt=T.scrollTop;ee(d=K.current).call(d,function(A){return A({scrollTop:Tt})})}},[O,u,C,o,ne,J,K,Q,Ne,Be,Le,Pe,k,I,B]);i.useEffect(function(){if(R){var c=!1,d=Zt(function(){var v=B.current,g=O.current!==null;I.current?tt({mode:o,target:v}).atEnd?c=!1:c?$()-c>Xt&&(g||(oe.current=v.scrollTop,u(function(){var T;return b(T=["%cInterval check%c: Should sticky but not at end, calling %cscrollToSticky()%c to scroll"]).call(T,f(p("navy")),f(p("orange")))}),Q()),c=!1):c=$():v.scrollHeight<=v.offsetHeight&&!I.current&&(u(function(){var T;return[b(T=["%cInterval check%c: Container is emptied, setting sticky back to %ctrue%c"]).call(T,f(p("navy")),f(p("purple"))),[{offsetHeight:v.offsetHeight,scrollHeight:v.scrollHeight,sticky:I.current}]]}),k(!0))},Math.max(Xe,r)||Xe);return function(){return clearInterval(d)}}},[O,r,u,o,Q,k,I,R,B]);var De=i.useMemo(function(){var c=et[h]||(et[h]=_t({key:"react-scroll-to-bottom--css-"+Yt(),nonce:h}));return function(d){return c.css(d)+""}},[h]),pt=i.useMemo(function(){return{observeScrollPosition:Me,setTarget:Ee,styleToClassName:De}},[Me,Ee,De]),se=i.useMemo(function(){return{atBottom:Re,atEnd:xe,atStart:Ie,atTop:Oe,mode:o}},[Re,xe,Ie,Oe,o]),ie=i.useMemo(function(){var c=E!==null;return{animating:c,animatingToEnd:c&&z(E,o),sticky:le}},[E,o,le]),ht=i.useMemo(function(){return Qe(Qe({},se),ie)},[se,ie]),gt=i.useMemo(function(){return{scrollTo:L,scrollToBottom:W,scrollToEnd:$e,scrollToStart:Fe,scrollToTop:U}},[L,W,$e,Fe,U]);return i.useEffect(function(){if(R){var c=function(){J.current=R.scrollHeight};return R.addEventListener("focus",c,{capture:!0,passive:!0}),function(){return R.removeEventListener("focus",c)}}},[R]),u(function(){var c;return[b(c=["%cRender%c: Render"]).call(c,f(p("cyan",""))),{animateTo:E,animating:E!==null,sticky:le,target:R}]}),y.createElement(te.Provider,{value:pt},y.createElement(de.Provider,{value:gt},y.createElement(ge.Provider,{value:ht},y.createElement(pe.Provider,{value:se},y.createElement(he.Provider,{value:ie},n,R&&y.createElement(lt,{debounce:a,name:"scroll",onEvent:dt,target:R}),R&&E!==null&&y.createElement(ct,{name:"scrollTop",onEnd:ce,target:R,value:E}))))))};Se.defaultProps={checkInterval:100,children:void 0,debounce:17,debug:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:Jt};Se.propTypes={checkInterval:m.number,children:m.any,debounce:m.number,debug:m.bool,initialScrollBehavior:m.oneOf(["auto","smooth"]),mode:m.oneOf(["bottom","top"]),nonce:m.string,scroller:m.func};var er={height:"100%",overflowY:"auto",width:"100%"},ye=function(e){var r=e.children,n=e.className,a=i.useContext(te),l=a.setTarget,s=Te()(er);return y.createElement("div",{className:me(s,(n||"")+""),ref:l},r)};ye.defaultProps={children:void 0,className:void 0};ye.propTypes={children:m.any,className:m.string};var tr={position:"relative"},Ce=function(e){var r=e.children,n=e.className,a=e.followButtonClassName,l=e.scrollViewClassName,s=Te()(tr);return y.createElement("div",{className:me(s,(n||"")+"")},y.createElement(ye,{className:(l||"")+""},r),y.createElement(be,{className:(a||"")+""}))};Ce.defaultProps={children:void 0,className:void 0,followButtonClassName:void 0,scrollViewClassName:void 0};Ce.propTypes={children:m.any,className:m.string,followButtonClassName:m.string,scrollViewClassName:m.string};var st=function(e){var r=e.checkInterval,n=e.children,a=e.className,l=e.debounce,s=e.debug,o=e.followButtonClassName,h=e.initialScrollBehavior,S=e.mode,u=e.nonce,C=e.scroller,w=e.scrollViewClassName;return y.createElement(Se,{checkInterval:r,debounce:l,debug:s,initialScrollBehavior:h,mode:S,nonce:u,scroller:C},y.createElement(Ce,{className:a,followButtonClassName:o,scrollViewClassName:w},n))};st.defaultProps={checkInterval:void 0,children:void 0,className:void 0,debounce:void 0,debug:void 0,followButtonClassName:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:void 0,scrollViewClassName:void 0};st.propTypes={checkInterval:m.number,children:m.any,className:m.string,debounce:m.number,debug:m.bool,followButtonClassName:m.string,initialScrollBehavior:m.oneOf(["auto","smooth"]),mode:m.oneOf(["bottom","top"]),nonce:m.string,scroller:m.func,scrollViewClassName:m.string};kt();export{st as B};
